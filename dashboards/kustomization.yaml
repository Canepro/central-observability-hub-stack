apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# This kustomization exists solely to package dashboards/*.json into a stable
# ConfigMap that Grafana mounts at runtime. This keeps Grafana on emptyDir (E1)
# while still provisioning dashboards from git on every start.
namespace: monitoring

generatorOptions:
  # Grafana mounts this ConfigMap by name; keep it stable.
  disableNameSuffixHash: true

configMapGenerator:
  - name: grafana-dashboards-repo
    files:
      - aks-maintenance-jobs.json
      - master-health-backup.json
      - rocketchat-mongodb-single-node.json
      - unified-world-tree.json
